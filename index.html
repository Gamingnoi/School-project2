<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Spinning Wheel</title>
<style>
  body {
    background: #111;
    color: white;
    font-family: Arial, sans-serif;
    text-align: center;
  }
  canvas {
    margin-top: 20px;
    border-radius: 50%;
  }
  button {
    margin-top: 20px;
    padding: 14px 28px;
    font-size: 20px;
    cursor: pointer;
  }
</style>
</head>
<body>

<h1>ðŸŽ¡ Teleloto ðŸŽ¡</h1>

<button onclick="spin()">SPIN</button>
<br>
<canvas id="wheel" width="700" height="700"></canvas>

<script>
const canvas = document.getElementById("wheel");
const ctx = canvas.getContext("2d");

let angle = 0;
let spinning = false;
let showingWinner = false;

let items = [
  "Aleksandra C. A. IVa", "Emilija A. IVa", "Emilius A. IVa", "Matas B. IVa", "Marija B. IVa", "Aivija D. IVa", "Justina G. IVa", "SaulÄ— G. IVa", "Orestas K. IVa",
  "Gabrielius K. IVa", "Majus K. IVa", "Karina K, IVa", "UgnÄ— L. IVa", "IzabelÄ— M. IVa", "AustÄ—ja M. IVa", "KamilÄ— M. IVa", "Danielius M. IVa", "Agota N. IVa",
  "Å½ygimantas P. IVa", "Gaja P. IVa", "Matas R. IVa", "Emilija V. IVa", "Ä„Å¾uolas V. IVa", "Å½ivilÄ— V. IVa", "Benediktas Å½. IVa", "Vaiva A. IVb", "Justas B. IVb",
  "Gerda B. IVb", "Arnas B. IVb", "ViltÄ— ÄŒ. IVb", "Adrija D. IVb", "JokÅ«bas G. IVb", "Arminas J. IVb", "Kantautas K. IVb", "Arnas K. IVb", "Klaudija M. IVb",
  "Evelina N. IVb", "Titas P. IVb", "Juras P. IVb", "Ainius R. IVb", "Kotryna R. IVb", "Trojus R. IVb", "Silvija R. IVb", "Hubertas S. IVb", "Goda S. IVb",
  "Greta S. IVb", "Monika T. IVb", "KamilÄ— T. IVb", "Gustas V. IVb", "Å½ivilÄ— V. IVb", "Tomas Å½. IVb", "Perla Å½. IVb", "Stela A. IVc", "Rokas Ä„Å¾uolas B. IVc",
  "SaulÄ— B. IVc", "SkaistÄ— D. IVc", "Lukas G. IVc", "Ariana G. IVc", "SaulÄ— J. IVc", "AistÄ— J. IVc", "Kajus M. IVc", "Vanesa M. IVc", "AustÄ—ja P. IVc", "Arnas P. IVc",
  "Matas P. IVc", "Emilija P. IVc", "Dinara P. IVc", "Eleonora P. IVc", "Julija P. IVc", "Marija Ieva R. IVc", "Egita S. IVc", "GabrielÄ— S. IVc", "Viktorija S. IVc",
  "EnÄ—ja T. IVc", "Gerda T. IVc", "UrtÄ— U. IVc", "RugilÄ— V. IVc", "Mileta V. IVc", "Tajus Å½. IVc", "Emilijus A. IVd", "Gabrielius B. IVd", "Å½ilvinas E. IVd",
  "Trojus Petras J. IVd", "SmiltÄ— L. IVd", "Ula M. IVd", "Aurelija M. IVd", "Liutauras P. IVd", "Liepa P. IVd", "Ema P. IVd", "Arijana P. IVd", "RugilÄ— R. IVd",
  "Evanas R. IVd", "KamilÄ— S. IVd", "EglÄ— S. IVd", "Karolis S. IVd", "Ervinas Å . IVd", "AugustÄ— T. IVd", "Viktorija U. IVd", "Kasparas V. IVd", "Rytis V. IVd",
  "Kajus V. IVd", "RÅ«ta Z. IVd", "Milena B. IVe", "Jonas Eidas G. IVe", "Simonas M. IVe", "Enrika M. IVe", "Gabrielius M. IVe", "Tomas N. IVe", "Orestas N. IVe",
  "Gabrielius P. IVe", "Marija JustÄ— P. IVe", "Robertas P. IVe", "Justas P. IVe", "Eimantas R. IVe", "AkvilÄ— R. IVe", "DeimantÄ— R. IVe", "Marija R. IVe", "Mantas Å . IVe",
  "Aironas U. IVe"
];

const pastelColors = [
  "#FFB3BA", "#FFDFBA", "#FFFFBA",
  "#BAFFC9", "#BAE1FF", "#D5BAFF"
];

function shuffleArray(arr) {
  for (let i = arr.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
}

function drawWheel(items) {
  if (items.length === 0) return;

  const radius = canvas.width / 2;
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  ctx.translate(radius, radius);

  const slice = 2 * Math.PI / items.length;

  items.forEach((item, i) => {
    ctx.beginPath();
    ctx.fillStyle = pastelColors[i % pastelColors.length];
    ctx.moveTo(0, 0);
    ctx.arc(0, 0, radius, i * slice + angle, (i + 1) * slice + angle);
    ctx.fill();

    const textAngle = i * slice + slice / 2 + angle;
    const textRadius = radius * 0.38;

    ctx.save();
    ctx.rotate(textAngle);
    ctx.translate(textRadius, 0);

    ctx.font = "bold 22px Arial";
    ctx.fillStyle = "#000";
    ctx.textAlign = "left";
    ctx.textBaseline = "middle";
    ctx.fillText(item, 0, 0);

    ctx.restore();
  });

  ctx.setTransform(1, 0, 0, 1, 0, 0);

  // pointer
  ctx.fillStyle = "red";
  ctx.beginPath();
  ctx.moveTo(canvas.width - 15, canvas.height / 2 - 15);
  ctx.lineTo(canvas.width - 15, canvas.height / 2 + 15);
  ctx.lineTo(canvas.width - 50, canvas.height / 2);
  ctx.fill();
}

function displayWinner(name) {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  let fontSize = 72;
  ctx.textAlign = "center";
  ctx.textBaseline = "middle";
  ctx.fillStyle = "#FFD700";

  do {
    ctx.font = `bold ${fontSize}px Arial`;
    fontSize--;
  } while (ctx.measureText(`ðŸŽ‰ ${name} ðŸŽ‰`).width > canvas.width * 0.85);

  ctx.fillText(`ðŸŽ‰ ${name} ðŸŽ‰`, canvas.width / 2, canvas.height / 2);
}

function spin() {
  if (spinning || items.length === 0) return;

  // If winner is showing, clear and redraw wheel
  if (showingWinner) {
    showingWinner = false;
    angle = 0;
    drawWheel(items);
  }

  spinning = true;
  shuffleArray(items);

  let velocity = Math.random() * 0.8 + 1.1;
  const decay = 0.98;

  function animate() {
    velocity *= decay;
    angle += velocity;
    drawWheel(items);

    if (velocity > 0.002) {
      requestAnimationFrame(animate);
    } else {
      const slice = 2 * Math.PI / items.length;
      const finalAngle = (2 * Math.PI - angle % (2 * Math.PI)) % (2 * Math.PI);
      const winnerIndex = Math.floor(finalAngle / slice);
      const winner = items[winnerIndex];

      // remove winner
      items.splice(winnerIndex, 1);

      setTimeout(() => {
        displayWinner(winner);
        showingWinner = true;
        spinning = false;
      }, 120);
    }
  }

  animate();
}

drawWheel(items);
</script>

</body>
</html>
